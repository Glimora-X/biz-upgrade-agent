可以通过插件进行自动同步代码，插件主要工作内容如下所示，也可以通过如下步骤进行手动同步代码。

# 本地环境

npm i -g @chanjet/cjet-cmd@3.0.0-alpha.2 @chanjet/eslint-plugin
插件安装：biz-upgrade

# 插件升级步骤

1.插件启用：

2.插件中用到的名词解释：
源仓库： app-service
目标仓库： app-service-plus
基线分支： 基于该分支拉取的特性分支
目标分支： 代码升级完后最终合入的分支
特性分支： 在该分支进行脚本升级与 test
源码分支： 在 app-service-plus 中接收源码的分支

# 插件工作流程如下

启动 syncCode
└─ 选择模式：
├─ 源仓库：仅推送到 plus（sourcePush, app-service）
│ ├─ 远程名：可填，默认 plus
│ ├─ 基线分支：默认 test-220915
│ ├─ 目标分支：默认 feat-test-250918
│ ├─ fetch origin
│ ├─ checkout/pull 基线
│ ├─ push 基线 → plus/目标分支
│ └─ 暂停：提示切到目标仓库 → 在当前窗口弹出工作区选择器
│ └─ 选目标模式（常规/重建）并在目标仓库继续
│
├─ 目标仓库：常规同步（standard, app-service-plus）
│ ├─ 远程名：固定 origin
│ ├─ 基线分支：默认 test-220915
│ ├─ 源码分支：默认取 lastSourceTargetBranch（若无则 feat-test-250918）
│ ├─ 特性分支：默认 feature/upgrade-test-YYMMDD
│ ├─ fetch origin & fetch origin（双拉）
│ ├─ checkout/pull 基线
│ ├─ push 基线 → origin/remoteTargetBranch(=源码分支)
│ ├─ checkout/创建特性分支
│ ├─ pull 源码分支
│ ├─ 暂停：人工处理冲突
│ ├─ yarn upgrade
│ ├─ 可选：yarn test
│ ├─ push 特性分支 → origin
│ ├─ checkout 基线
│ ├─ merge 特性分支 → push origin
│ ├─ push 基线 → 远程（origin/base）
│ └─ 暂停：流程完成
│
└─ 目标仓库：重建分支（rebuild, app-service-plus）
├─ 远程名：固定 origin
├─ 基线分支：默认取 lastSourceTargetBranch（若无则 feat-test-250918）
├─ 新分支：默认 feature/upgrade-YYMMDD
├─ 上一版分支：可空
├─ 最终合入分支：默认 test-220915
├─ fetch origin & fetch origin（双拉）
├─ checkout/pull 基线
├─ push 基线 → origin/base
├─ checkout/创建新分支
├─ yarn upgrade --commit
├─ 可选：merge 上一版分支 --no-verify
├─ 暂停：人工处理冲突
├─ 可选：yarn test
├─ push 新分支 → origin
├─ checkout 最终分支 → pull
├─ merge 新分支 → push origin
├─ push 最终分支 → 远程（origin/final）
└─ 暂停：流程完成

# 手动升级步骤如下：

# ============================================

# app-service 仓库

# ============================================

# 添加远程仓库

git remote add plus https://gitlab.rd.chanjet.com/cc_web/cc-front-biz-app-service-plus

git remote -v

# 切换到 test-220915 分支

git checkout test-220915

# 拉取代码 并记录

git pull origin test-220915

# 推送到 plus 仓库 feat-test-250918 分支、避免直接覆盖 plus 的 test-220915 分支

git push plus test-220915:feat-test-250918

# ============================================

# 在 app-service-plus 仓库通过 merge request/pull request 来合并代码

# ============================================

#切换到 feat-test-250918 分支
git checkout feat-test-250918
git pull origin feat-test-250918 拉完代码就结束
【feat-test-250918 这个分支只做数据同步 和源码一致】

1. 只是正常同步代码【没有脚本变更、没有大量的 voucherconfig 文件修正、或者结构目录调整】

# 从 test-220918 拉一个特性分支来做升级，如 feature/upgrade-test-251218

git checkout test-220918
git pull
git checkout -b feature/upgrade-test-251218

# 拉一下源码分支

git pull origin feat-test-250918

# 解决冲突

- 遇见 voucherconfig 文件 先采用当前分支，然后将源码 copy 出来，后续通过脚本升级
- 遇见新写法的冲突一般采用当前，如带有 bizSchemaManager、bizApplication
- 出现引用冲突的可以使用 做简单对比 一般可以先采用新分支的，后续通过脚本升级

# 进行脚本升级

yarn upgrade

# 进行单测修复

yarn test

# 提交代码 g

git push origin feature/upgrade-test-251218

# 最后再合并到 test-220915 分支

git merge feature/upgrade-test-251218
git push

2.脚本变更、大量的 voucherconfig 文件修正、结构目录调整等需要重建分支时

# 依据 feat-test-250918 拉一个特性分支进行代码升级 如 feature/upgrade-test-25**新**

# 进行脚本升级 yarn upgrade --commit 【commit 会把每类脚本单独提交 方便回滚】

# 将 feature/upgrade-test-25**新** merge 上一次的 feature/upgrade-test-25**旧**[--no--verify]

# 进行单测修复

# 进行本地测试 并记录

# 最后再合并到 plus 仓库的 test-220915 分支 合并代码 并记录

git checkout test-220915
git merge origin feature/upgrade-test-25**新**

# 插件其他功能介绍

## 1. 迁移检测（实时扫描）

- **做什么**：打开/编辑 `ts/js/tsx/jsx` 文件时，插件会基于规则自动扫描废弃 API、旧写法并在编辑器中标记提示。
- **适用**：边开发边迁移；不需要手动全量跑脚本就能先定位风险点。
- **注意**：可通过 VS Code 设置开关控制（见“配置”小节）。

## 2. 悬停迁移指南（Hover）

- **做什么**：鼠标悬停在被标记的旧 API/旧写法上，会展示迁移说明、推荐写法与示例。
- **适用**：不熟悉 biz-core 新范式时，快速查看替换思路与注意点。

## 3. 一键快速修复（Quick Fix）

- **做什么**：在提示位置点击灯泡（Quick Fix），可一键替换为新框架写法（基于规则提供的替换/迁移建议）。
- **适用**：重复性迁移点（批量出现的旧写法）优先用 Quick Fix 提速。

## 4. 迁移仪表板（Dashboard）

- **入口**：命令面板（`Cmd/Ctrl + Shift + P`）→ `Biz Migration: 显示迁移仪表板`
- **做什么**：可视化查看当前项目的迁移进度/问题分布，帮助评估剩余工作量。

## 5. 全量扫描项目（Scan Project）

- **入口**：命令面板 → `Biz Migration: 扫描整个项目`
- **做什么**：扫描工作区内所有 `**/*.{ts,tsx,js,jsx}` 文件并生成迁移问题标记。
- **适用**：拉完新分支或合入源码分支后，做一次全量盘点。

## 6. 刷新迁移规则（Refresh Rules）

- **入口**：命令面板 → `Biz Migration: 刷新迁移规则`
- **做什么**：重新加载规则文件（见“配置”小节的 `rulePaths`），用于规则更新后即时生效。
- **提示**：规则文件本身支持监听热更新；不确定是否已生效时可以手动刷新一次。

## 7. 分析当前文件代码结构（Analyze Code）

- **入口**：命令面板 → `Biz Migration: 分析代码结构`
- **做什么**：对当前打开文件做 AST 分析，展示导入模块等信息，便于定位迁移涉及的依赖与上下文。
- **适用**：排查“为什么这个文件没命中规则/命中不完整”等问题时辅助使用。

## 8. 同步流程的“继续”能力（冲突处理后恢复）

- **入口**：命令面板 → `Biz Migration: 继续同步流程（冲突解决后）`
- **做什么**：在 `syncCode` 的 `pull/merge` 步骤遇到冲突暂停后，人工在 SCM 里解决冲突并提交/完成合并后，可通过该命令恢复流程继续执行后续步骤。
- **提示**：同步过程日志会输出到 VS Code 的 Output 面板通道：`Biz Upgrade Sync`。

## 9. 配置（规则与开关）

### 9.1 规则文件

- **默认路径**：项目根目录的 `migration.config.json` 或 `.migration/rules.json`
- **可配置路径**：VS Code 设置项 `bizFrameworkMigration.rulePaths`（数组，支持多个候选）
- **规则级忽略**：每条规则支持 `ignorePatterns`（glob），用于排除 `legacy/`、测试文件、vendor 等目录/文件。

### 9.2 VS Code 设置项

在 VS Code `settings.json` 中可配置：

```json
{
  "bizFrameworkMigration.enabled": true,
  "bizFrameworkMigration.autoScan": true,
  "bizFrameworkMigration.showDashboardOnStartup": false
}
```